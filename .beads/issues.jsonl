{"id":"dishcovery-2e2","title":"Carbon Design System UI - Header \u0026 Search Bar","description":"Implement the Carbon-styled header with search bar component.\n\n## Overview\nCreate a fixed header with the application title and a search bar following Carbon Design System patterns.\n\n## Scope\n\n### Header Component\n- Fixed position at top of viewport\n- 48px height (Carbon standard)\n- Background: `--cds-layer-01` (#f4f4f4)\n- App title \"Dishcovery\" on the left\n- Mobile menu trigger button (hamburger icon) - hidden on desktop\n\n### Search Bar (Carbon Search Component Style)\n- Positioned in header, takes available width\n- Search icon (magnifying glass) on left inside input\n- Placeholder text: \"Search recipes...\"\n- Clear button (X icon) appears when input has value\n- Gray background (`--cds-field-01`)\n- Border on focus (`--cds-focus`)\n- Medium size (40px height)\n\n### Icons (via Iconify)\n- `carbon:search` - search icon\n- `carbon:close` - clear button\n- `carbon:menu` - mobile menu trigger\n\n### HTMX Integration\n- Search form posts to /search\n- Targets #results area\n- Debounced trigger (keyup changed delay:300ms)\n- Hidden inputs for current filter state\n\n## Technical Notes\n- Search input should be inside a form element\n- Preserve existing search functionality\n- Use `\u003ciconify-icon\u003e` web component for icons\n- Icons inherit currentColor for easy theming\n\n## Out of Scope\n- Filter sidebar (separate ticket)\n- Mobile sidebar behavior (separate ticket)\n\n## References\n- Carbon Search: https://carbondesignsystem.com/components/search/usage/\n- Carbon UI Shell Header: https://carbondesignsystem.com/components/ui-shell-header/usage/","acceptance_criteria":"- Header is fixed at top with correct height (48px)\n- App title displays on the left\n- Search bar has Carbon styling with search icon\n- Clear button appears when input has text\n- Search functionality works (debounced HTMX request)\n- Mobile menu button is visible on small screens\n- Icons render correctly via Iconify","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":60,"created_at":"2026-01-01T16:14:41.511996+01:00","updated_at":"2026-01-01T16:49:25.178116+01:00","closed_at":"2026-01-01T16:49:25.178116+01:00","close_reason":"Closed","labels":["frontend","ui"],"dependencies":[{"issue_id":"dishcovery-2e2","depends_on_id":"dishcovery-i4r","type":"blocks","created_at":"2026-01-01T16:14:41.515205+01:00","created_by":"daemon"},{"issue_id":"dishcovery-2e2","depends_on_id":"dishcovery-dpq","type":"parent-child","created_at":"2026-01-01T16:15:55.57609+01:00","created_by":"daemon"}]}
{"id":"dishcovery-a5l","title":"Carbon Design System UI - Results Area \u0026 Recipe Cards","description":"Implement the results area with Carbon-styled recipe cards and infinite scroll.\n\n## Overview\nCreate the main content area displaying search results as styled recipe cards with infinite scroll pagination.\n\n## Scope\n\n### Results Summary Header\n- Display total count: \"Found X recipes\"\n- Show search query if present: \"for 'pasta'\"\n- Show search time: \"in Xms\"\n- Positioned at top of results area\n\n### Recipe Cards (Carbon Tile Style)\nEach card displays:\n- **Title**: Recipe name (heading, prominent)\n- **Description**: Truncated to ~150 chars with ellipsis\n- **Tags row**: Small colored tags for:\n  - Cuisine(s) - e.g., \"Italian\", \"Asian\"\n  - Difficulty - color coded (green=easy, yellow=medium, red=hard)\n  - Dietary badges - \"Vegan\", \"GF\", etc.\n- **Time indicators**: \n  - Prep time with icon: \"15 min prep\"\n  - Cook time with icon: \"30 min cook\"\n- **Healthiness score**: Visual indicator (progress bar or badge)\n\n### Card Styling\n- White background (`--cds-layer-02`) on gray page\n- Subtle border (`--cds-border-subtle`)\n- Border radius per Carbon spec\n- Hover state: slight shadow or background change\n- Consistent padding using Carbon spacing tokens\n- Responsive: stack nicely on mobile\n\n### Empty State (Initial Load)\n- Friendly message: \"Start searching to discover recipes\"\n- Suggest example searches\n- Optional: decorative illustration or icon\n- Displayed when no query has been entered yet\n\n### No Results State\n- Message: \"No recipes found for 'X'\"\n- Suggestions to broaden search\n- Different from empty state\n\n### Infinite Scroll\n- Load more results as user scrolls\n- Use HTMX hx-trigger=\"revealed\" on sentinel element\n- Append new cards to existing results\n- Show loading indicator while fetching\n- Hide sentinel when no more results\n- Increment `from` parameter for pagination\n\n### Template Updates\nUpdate `api/templates/partials/search_results.html`:\n- Recipe cards with new styling\n- Infinite scroll sentinel element\n- Proper empty/no-results states\n\n### Icons (via Iconify)\n- `carbon:time` - prep/cook time\n- `carbon:restaurant` or `carbon:noodle-bowl` - cuisine indicator\n- `carbon:health-cross` or similar - healthiness\n- `carbon:skill-level-basic/intermediate/advanced` - difficulty\n\n## Technical Notes\n- Cards should be semantic `\u003carticle\u003e` elements\n- Use CSS Grid or Flexbox for card layout\n- Tags use Carbon tag component styling\n- Consider `loading=\"lazy\"` for any images (future)\n- Infinite scroll: sentinel div at bottom with hx-get, hx-trigger=\"revealed\"\n\n## Out of Scope\n- Recipe detail modal/page\n- Save/favorite functionality\n- Card click behavior\n\n## References  \n- Carbon Tile: https://carbondesignsystem.com/components/tile/usage/\n- Carbon Tag: https://carbondesignsystem.com/components/tag/usage/\n- HTMX Infinite Scroll: https://htmx.org/examples/infinite-scroll/","acceptance_criteria":"- Results summary shows count, query, and timing\n- Recipe cards display with Carbon tile styling\n- Cards show title, description, tags, time, healthiness\n- Tags are color-coded appropriately  \n- Empty state displays on initial page load\n- No results state displays for zero-result searches\n- Infinite scroll loads more results on scroll\n- Loading indicator shows during fetch\n- Cards are responsive on mobile\n- Hover states work on cards","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":90,"created_at":"2026-01-01T16:15:24.640587+01:00","updated_at":"2026-01-10T18:05:10.785317+01:00","closed_at":"2026-01-10T18:05:10.785317+01:00","close_reason":"Closed","labels":["frontend","ui"],"dependencies":[{"issue_id":"dishcovery-a5l","depends_on_id":"dishcovery-i4r","type":"blocks","created_at":"2026-01-01T16:15:24.643641+01:00","created_by":"daemon"},{"issue_id":"dishcovery-a5l","depends_on_id":"dishcovery-dpq","type":"parent-child","created_at":"2026-01-01T16:15:55.803127+01:00","created_by":"daemon"}]}
{"id":"dishcovery-cir","title":"Remove JSON API, convert /search to HTML-only","description":"Architectural shift: convert the app from JSON API to server-rendered HTML only.\n\n## Context\nThe original plan was a JSON API + separate frontend. New direction is Jinja2+HTMX server-rendered HTML as the only client.\n\n## Scope\n- Remove JSON response from POST /search endpoint\n- Convert /search to return HTML (TemplateResponse)\n- Remove SearchResponse as API response model (keep internally if useful)\n- Keep /health, /metrics, /bulk-load as-is (operational endpoints)\n\n## Out of Scope\n- Actual search UI implementation (separate ticket)\n- OpenAPI docs decision (can revisit later)\n\n## Dependencies\n- Requires dishcovery-dx1 (Jinja2+HTMX basic setup) to be completed first","acceptance_criteria":"- POST /search returns HTML instead of JSON\n- /health returns JSON (unchanged)\n- /metrics returns Prometheus format (unchanged)\n- /bulk-load returns JSON (unchanged)\n- No regressions to Elasticsearch query logic","status":"closed","priority":2,"issue_type":"chore","estimated_minutes":30,"created_at":"2025-12-20T16:42:01.949452+01:00","updated_at":"2025-12-20T16:46:10.241969+01:00","closed_at":"2025-12-20T16:46:10.241969+01:00","close_reason":"Closed","labels":["frontend"],"dependencies":[{"issue_id":"dishcovery-cir","depends_on_id":"dishcovery-dx1","type":"blocks","created_at":"2025-12-20T16:42:01.952936+01:00","created_by":"daemon"}]}
{"id":"dishcovery-dhc","title":"Carbon Design System UI - Filter Sidebar \u0026 Aggregations","description":"Implement the filter sidebar with collapsible sections and aggregation counts.\n\n## Overview\nCreate a left sidebar with filter options organized in collapsible accordion sections. Filters are populated from Elasticsearch aggregations with document counts.\n\n## Scope\n\n### Sidebar Layout\n- Fixed width: 256px on desktop\n- Background: `--cds-layer-01`\n- Full height (below header)\n- Scrollable if content overflows\n\n### Filter Sections (Accordion Style)\nEach section has a header that toggles visibility of filter options:\n\n1. **Cuisines** (checkboxes, multi-select)\n   - Populated from `aggregations.cuisines`\n   - Shows count: \"Italian (245)\"\n\n2. **Difficulty** (radio buttons, single-select)\n   - Options: Easy, Medium, Hard\n   - From `aggregations.difficulty_levels`\n\n3. **Dietary Preferences** (checkboxes, multi-select)\n   - Vegan, Vegetarian, Gluten-Free, Dairy-Free, Nut-Free\n   - From `aggregations.dietary_profiles`\n\n4. **Prep Time** (radio buttons, single-select)\n   - Ranges: \u003c 15 min, 15-30 min, 30-60 min, \u003e 60 min\n   - From `aggregations.prep_time_ranges`\n\n5. **Cook Time** (radio buttons, single-select)\n   - Similar ranges to prep time\n   - From `aggregations.cook_time_ranges`\n\n6. **Healthiness Score** (range input or preset ranges)\n   - From `aggregations.healthiness_stats`\n\n### Accordion Behavior\n- Chevron icon indicates expand/collapse state\n- CSS-only accordion (no JS required, use checkbox hack or details/summary)\n- Sections start expanded by default\n\n### Active Filters Display\n- Show currently applied filters as removable tags/chips\n- Display above results area (in main content)\n- Click X to remove filter and refresh results\n\n### HTMX Integration\n- Filter form submits on change\n- Updates results area\n- Preserves search query\n- URL state management (optional, nice-to-have)\n\n### Backend Changes (main.py)\n- Always include aggregations in HTML search response\n- Aggregations needed for sidebar filter counts\n- No API changes needed, just ensure include_aggregations=True for HTML rendering\n\n### Mobile Behavior\n- Sidebar hidden by default on screens \u003c 768px\n- Slide-in from left when menu button clicked\n- Overlay dims main content when sidebar open\n- Close button or overlay click to dismiss\n\n### Icons (via Iconify)\n- `carbon:chevron-down` / `carbon:chevron-up` - accordion toggle\n- `carbon:close` - remove filter tag\n- `carbon:filter` - mobile filter button badge\n\n## Technical Notes\n- Use CSS-only accordion where possible (details/summary or checkbox hack)\n- Checkboxes and radios styled to match Carbon\n- Form inputs use name attributes matching SearchRequest model\n- Consider using hx-include to include search query with filters\n\n## Out of Scope\n- Recipe cards styling (separate ticket)\n- Infinite scroll (separate ticket)\n\n## References\n- Carbon Accordion: https://carbondesignsystem.com/components/accordion/usage/\n- Carbon Checkbox: https://carbondesignsystem.com/components/checkbox/usage/\n- Carbon Tag: https://carbondesignsystem.com/components/tag/usage/","acceptance_criteria":"- Sidebar displays with correct width and styling\n- All 6 filter sections render with accordion behavior\n- Aggregation counts display next to filter options\n- Checkboxes and radio buttons are styled Carbon-like\n- Selecting filters updates search results via HTMX\n- Active filters show as removable tags above results\n- Mobile: sidebar slides in from left on menu click\n- Mobile: overlay appears behind sidebar\n- Backend always returns aggregations for HTML responses","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":120,"created_at":"2026-01-01T16:15:03.946249+01:00","updated_at":"2026-01-01T17:12:48.297213+01:00","closed_at":"2026-01-01T17:12:48.297213+01:00","close_reason":"Closed","labels":["backend","frontend","ui"],"dependencies":[{"issue_id":"dishcovery-dhc","depends_on_id":"dishcovery-i4r","type":"blocks","created_at":"2026-01-01T16:15:03.949301+01:00","created_by":"daemon"},{"issue_id":"dishcovery-dhc","depends_on_id":"dishcovery-dpq","type":"parent-child","created_at":"2026-01-01T16:15:55.689773+01:00","created_by":"daemon"}]}
{"id":"dishcovery-dpq","title":"Implement Carbon Design System UI","description":"Replace the placeholder UI with a proper Carbon Design System styled interface.\n\n## Overview\nImplement a professional UI following IBM's Carbon Design System visual language, without using any external component libraries. The implementation uses only custom CSS that mirrors Carbon's design tokens and patterns.\n\n## Goals\n- Clean, professional appearance following Carbon Design System\n- Search bar at top in header\n- Filter sidebar on left with aggregation-based filters\n- Recipe cards in main results area\n- Responsive design with mobile-friendly off-canvas sidebar\n- Prepare for dark theme (implement later)\n\n## Design Decisions\n- **No external CSS frameworks**: Pure CSS using Carbon design tokens as CSS variables\n- **Icons**: Iconify web component with Carbon icon set (`carbon:*`)\n- **Fonts**: IBM Plex Sans via Google Fonts CDN (self-host later)\n- **Theme**: White theme initially, dark theme CSS vars prepared but inactive\n- **Mobile**: Off-canvas slide-in sidebar pattern\n- **Infinite scroll**: For pagination instead of page numbers\n\n## Technical Approach\n- CSS custom properties for all colors, spacing, typography\n- Semantic HTML with proper accessibility\n- HTMX for dynamic interactions (no custom JavaScript)\n- Server-side aggregations always included for filter counts\n\n## Child Issues\n- dishcovery-i4r: Foundation \u0026 Base Layout\n- dishcovery-2e2: Header \u0026 Search Bar  \n- dishcovery-dhc: Filter Sidebar \u0026 Aggregations\n- dishcovery-a5l: Results Area \u0026 Recipe Cards\n\n## References\n- Carbon Design System: https://carbondesignsystem.com/\n- ADR-001: Server-Side Rendering with Jinja2 + HTMX\n- ADR-004: Modern CSS Features","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-01T16:15:36.957712+01:00","updated_at":"2026-01-01T16:15:36.957712+01:00","labels":["frontend","ui"]}
{"id":"dishcovery-dx1","title":"Integrate Jinja2+HTMX basic setup","description":"Add Jinja2 templating and HTMX to the FastAPI application for server-side rendered frontend.\n\n## Scope\n- Add jinja2 dependency to pyproject.toml\n- Create api/templates/ directory structure\n- Create api/static/ directory with HTMX library\n- Configure StaticFiles and Jinja2Templates in main.py\n- Add a basic index route that renders a template\n\n## Out of Scope\n- Full search UI implementation\n- CSS framework selection\n- Recipe display templates","acceptance_criteria":"- Jinja2 templates render successfully from /\n- HTMX library is served from /static/\n- Templates directory structure exists\n- No regressions to existing API endpoints","status":"closed","priority":2,"issue_type":"feature","estimated_minutes":60,"created_at":"2025-12-20T15:55:03.54317+01:00","updated_at":"2025-12-20T16:01:43.262713+01:00","closed_at":"2025-12-20T16:01:43.262717+01:00","labels":["frontend"]}
{"id":"dishcovery-i4r","title":"Carbon Design System UI - Foundation \u0026 Base Layout","description":"Set up the foundational CSS and HTML structure for Carbon Design System styled UI.\n\n## Overview\nReplace the dummy UI with a proper Carbon Design System implementation. This ticket establishes the base CSS tokens, typography, and layout structure that all subsequent UI work depends on.\n\n## Scope\n\n### CSS Foundation (`api/static/styles.css`)\n- CSS custom properties for Carbon White theme color tokens:\n  - `--cds-background`: #ffffff\n  - `--cds-layer-01`: #f4f4f4\n  - `--cds-layer-02`: #ffffff\n  - `--cds-text-primary`: #161616\n  - `--cds-text-secondary`: #525252\n  - `--cds-interactive`: #0f62fe (Blue 60)\n  - `--cds-border-subtle`: #e0e0e0\n  - And other tokens from Carbon color spec\n- Prepared (but inactive) dark theme variables for future use\n- Carbon spacing scale (8px grid): spacing-01 through spacing-07\n- Typography setup with IBM Plex Sans\n- Focus state styles (2px blue outline)\n- CSS reset/normalize basics\n\n### External Dependencies\n- IBM Plex Sans via Google Fonts CDN\n- Iconify web component for Carbon icons (`\u003ciconify-icon icon=\"carbon:*\"\u003e`)\n\n### HTML Layout Structure (`api/templates/index.html`)\n- Fixed header (48px height)\n- Left sidebar (256px width)\n- Main content area\n- Sidebar overlay for mobile\n- Proper semantic HTML structure\n\n## Technical Notes\n- Use CSS custom properties (variables) for all colors - no hardcoded values\n- Follow Carbon's layering model for backgrounds\n- Prepare `:root` for theme switching (data-theme attribute)\n- Mobile breakpoint at 768px\n\n## Out of Scope\n- Actual component styling (search bar, filters, cards)\n- HTMX interactions\n- Dark theme activation\n\n## References\n- Carbon Color Tokens: https://carbondesignsystem.com/elements/color/tokens/\n- Carbon Typography: https://carbondesignsystem.com/elements/typography/overview/\n- Iconify Carbon Icons: https://icon-sets.iconify.design/carbon/","acceptance_criteria":"- CSS file exists at api/static/styles.css with Carbon tokens\n- IBM Plex Sans font loads from Google Fonts CDN\n- Iconify script is included for Carbon icons\n- HTML has header, sidebar, main layout structure\n- Layout is visible and correctly positioned\n- Dark theme variables are defined but not active\n- No regressions to existing search functionality","status":"closed","priority":1,"issue_type":"feature","estimated_minutes":90,"created_at":"2026-01-01T16:14:28.157705+01:00","updated_at":"2026-01-01T16:40:39.246465+01:00","closed_at":"2026-01-01T16:40:39.246465+01:00","close_reason":"Closed","labels":["frontend","ui"],"dependencies":[{"issue_id":"dishcovery-i4r","depends_on_id":"dishcovery-dpq","type":"parent-child","created_at":"2026-01-01T16:15:55.463967+01:00","created_by":"daemon"}]}
{"id":"dishcovery-lwv","title":"Add basic search input with debounced HTMX request","description":"Add a minimal search UI that queries Elasticsearch for recipe titles.\n\n## Behavior\n- Simple text input on the index page\n- Fires POST /search after 300ms debounce (hx-trigger=\"keyup changed delay:300ms\")\n- No submit button needed\n- Results display as basic unstyled HTML list of recipe titles\n- Show total count (e.g., \"Found 6,037 recipes\")\n- Handle empty/no results state\n\n## Technical\n- Form sends query via standard form encoding\n- /search endpoint accepts form data and returns HTML fragment\n- HTMX swaps results into target div\n\n## Out of Scope\n- Styling/CSS\n- Filters (cuisine, dietary, time, etc.)\n- Pagination\n- Recipe detail view\n\n## Dependencies\n- Requires dishcovery-dx1 (Jinja2+HTMX basic setup)\n- Requires dishcovery-cir (JSON to HTML conversion)","acceptance_criteria":"- User can type in search input\n- Results appear automatically after 300ms pause in typing\n- Recipe titles are displayed in a list\n- Total count is shown\n- Empty query shows all recipes (or appropriate default)\n- No results state is handled","status":"closed","priority":2,"issue_type":"feature","estimated_minutes":45,"created_at":"2025-12-20T16:42:10.749313+01:00","updated_at":"2025-12-20T16:49:29.925253+01:00","closed_at":"2025-12-20T16:49:29.925253+01:00","close_reason":"Closed","labels":["frontend"],"dependencies":[{"issue_id":"dishcovery-lwv","depends_on_id":"dishcovery-dx1","type":"blocks","created_at":"2025-12-20T16:42:10.752507+01:00","created_by":"daemon"},{"issue_id":"dishcovery-lwv","depends_on_id":"dishcovery-cir","type":"blocks","created_at":"2025-12-20T16:42:10.753588+01:00","created_by":"daemon"}]}
